타이타닉 생존분석 실습을 진행하겠습니다
먼저 데이터획득을 위해 인터넷에 공유된 arff 파일을 불러오겠습니다
https://wwwopenmlorg/d/40945  접속을 하고
상단에 있는 다양한 형태의 파일중에서
arff 파일 아이콘을 오른쪽 버튼을 클릭하면
arff 파일의 url 이 보입니다
여기서 arff 문자열이 없기 때문에
메모장에서 arff 문자열을 추가해서 url 을 복사합니다

weka 를 실행하고 Explorer 에서 open url 을 클릭하면
새로운 팝업창에 url 을 붙여 놓고 확인을 클릭합니다

그러면 preprocess 패널에서
저장된 arff 파일을 불러오듯이, url 을 통해서 데이터세트를 불러옵니다
----------------------------------- (url arff 획득)
전처리 작업을 하기전에 통계량을 보면
속성 14개로 구성되어 있는 1309건의 데이터고
edit 버튼을 클리하면 전체 데이터의 내용이 보입니다

여기서 String 형태의 속성들이 간간히 보이는데요
12번째, 14번째 속성이 string 형태여서
필터를 통해 nominal 형태로 변경합니다
3번째, 8번째, 10번째 는 이름, 티켓번호, 객실번호이기 때문에
고유명사처럼 유니크한 데이터이므로 nominal 형태로 
변환하지 않습니다

unsupervised > attribute > StringToNomial 필터를 선택하고
클릭을 해서 string 형태의 속성번호를 입력합니다
12,14 로 입력하고 쉼표(,)로 구분합니다

apply 를 클릭한다음 다시 edit 버튼을 클릭하면
String 의 속성이 모두 Nominal 로 변경되었습니다

다음은 숫자형으로 되어 있는 객실등급 속성을
Nominal 형태로 변경합니다

unsupervised > attribute > NumericToNomial 필터를 선택하고
클릭을 해서 numeric 형태의 속성번호 1 을 입력합니다

apply 를 클릭한다음 다시 edit 버튼을 클릭하면
Numeric 형태의 객실등급 데이터형태가 Nominal 로 변경되었습니다

----------------------------------- (edit 확인)

이 데이터세트는 특이하게 목표변수 (클래스변수) 인 생존여부 속성이 2번째에 있습니다
따라서 class 변수가 2번째인 survived 이라는 것을 강제로 지정하거나
전처리를 통해서 맨마지막으로 속성을 통채로 이동해야 합니다

일단 데이터 분포를 확인하기 위해 visualize all 을 클릭할 하기전에
class 변수가 2번째 survived 라는 것을 선택해 줍니다

그러면 모든속성별로 데이터 분포를 확인할 수 있는데
age 는 약간의 정규성 분포를 갖고 boat 도 약간의 정규성을 갖습니다
정규성이 많다는 것은 로지스틱 회귀 분석이나 NaiveBayes 알고리즘이
적합할 수 있습니다

그리고 파란색은 사망의 경우인데
age 를 보면 고른분포를 보이지만
boat 데이터의 경우 파란색이 거의 보이지 않습니다
탑승한 구명보트 번호가 있다는 것은 
구명보트 탑승여부가 생존과 직결됨을 알 수 있습니다
pclass 는 객실등급인데 1,2등급의 사망자 분포가 3 등급 보다 적은것을 알 수 있습니다
또한 성별에서도 female 여성의 사망자 분포가 남성보다는 적다는 것을 알 수 있습니다

이런 단서를 가지고 전처리 할 때 
이론시간에 말씀 드린것처럼 객실등급, 나이, 성별, 탑승한 구명보트 번호는 
반드시 필요한 속성이라는 것을 알아야 합니다

----------------------------------- (visuall all)


이제 한글로 속성명과 데이터를 변환해 보겠습니다
먼저 weka charset 을 확인합니다

weka 에서 help 를 클릭하고
systeminfo 를 보면 fileencoding 이 Cp949 로 되어 있는지 확인합니다

만약 다른 형태로 되어 있으면 RunWekaini 파일을 메모장으로 열어서
fileencoding 을 Cp949 로 수정합니다
----------------------------------- (Cp949)

이제 본격적으로 한글변환을 하겠습니다
속성명을 변경하는 것은 unsupervised > attribute > RenameAttribute 입니다

클릭하고 설정할 수 있는 새로운 창이 보이면
속성위치를 1로 하고, replace 에 객실등급 으로 수정후 ok 를 클릭합니다
그리고 apply 를 클릭하면 1번째 속성명이 한글로 객실등급으로 변경되것을 확인할 수 있습니다

14개 속성을 일일 지정해야 하는데 번거로우니 이 데이터세트를 저장해서
메모장에서 강제로 수정해 보겠습니다

그러면 titanic_ko 로 저장합니다 (컷)



----------------------------------- RenameAttribute (필터 1/2)

데이터값을 한글로 수정해 보겠습니다
데이터 값을 변경하는 속성은 1번째 객실등급, 2번째 생존여부, 4번째 성별입니다
사용하게될 필터는 unsupervised > attribute > RenameNominalValue 입니다

설정을 변경하기 위해 흰색부분을 클릭하고
첫번째 객실등급의 데이터를 변경하기 위해서 
속성위치를 1로 입력하고
1:1등급,2:2등급,3:3등급 으로 입력합니다

원래 데이터와 변경할 데이터는 (콜론) : 으로 구분을 하고 다음변환규칙은 콤마로 분리해서 기입합니다

1:1등급,2:2등급,3:3등급
1:구조,2:사망
female:여성,male:남성

(1 객실등급,2 생사여부,4 성별)
----------------------------------- RenameNominalValue (필터 2/2)
다음은 결측값 처리를 해보겠습니다
결측값이라는 것은 데이터가 누락된 것을 말합니다
결측값 처리방법은 다양하지만 여기서는 결측율 33% 이상인 속성을 삭제하겠습니다

결측율이란 것은 속성별로 전체 데이터 1309건 중에 누락된 비율입니다
33% 는 weka 에서 권고하는 수치입니다
따라서 관련자들과 의사결정을 통해 결측률을 선정하면 됩니다 

결측율을 확인하는 방법은 selected attribute 엣 missing 의 비율을 확인하면 됩니다

구명정 번호는 결측율이 63% 나 되지만 사망자들의 경우 누락되는 것이 당연합니다
그러므로 33% 이상이지만 생존분석에 직결되는 구명정번호 속성은 남겨놓습니다



전처리 패널에서 각 속성별 결측율을 확인후 삭제하고 _remove 를 붙입니다


 

 

 

 

 

 

 

 

 

 

 

 